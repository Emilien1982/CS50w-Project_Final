{% load static %}

<section id="extra-date">
    <div class="container">

        <div id="opened-weekdays">
            <!-- Visible part -->
            <div>
                <p>The restaurant is opened on:</p>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Lunch</th>
                            <th>Dinner</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for day in weekdays %}
                            <tr>
                                <th>{{ day.weekday }}</th>
                                <th>{% if day.is_opened_lunch %}✔️{% else %} - {% endif %}</th>
                                <th>{% if day.is_opened_dinner %}✔️{% else %} - {% endif %}</th>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <!-- Button trigger modal -->
                <button type="button" id="change-wdays-btn" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Change
                </button>
            </div>
            <!-- Pop up "Change" part -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Edit Opening Weekdays</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form action="/weekday_update" method="POST" data-existing_days="{{ weekdays }}">
                            {% csrf_token %}
                            <table>
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>Lunch</th>
                                        <th>Dinner</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- SUPPRIMER LE ID CI DESSOUS SI NON UTILISE -->
                                    <tr id="monday">
                                        <th>Monday</th>
                                        <th><input class="lunch" type="checkbox" name="mon-lun"
                                            {% if weekdays.0.is_opened_lunch %} checked{% endif %}
                                            ></th>
                                        <th><input class="dinner" type="checkbox" name="mon-din"
                                            {% if weekdays.0.is_opened_dinner %} checked{% endif %}
                                            ></th>
                                    </tr>
                                    <tr id="tuesday">
                                        <th>Tuesday</th>
                                        <th><input class="lunch" type="checkbox" name="tue-lun"
                                            {% if weekdays.1.is_opened_lunch %} checked{% endif %}
                                            ></th>
                                        <th><input class="dinner" type="checkbox" name="tue-din"
                                            {% if weekdays.1.is_opened_dinner %} checked{% endif %}
                                            ></th>
                                    </tr>
                                    <tr id="wednesday">
                                        <th>Wednesday</th>
                                        <th><input class="lunch" type="checkbox" name="wed-lun"
                                            {% if weekdays.2.is_opened_lunch %} checked{% endif %}
                                            ></th>
                                        <th><input class="dinner" type="checkbox" name="wed-din"
                                            {% if weekdays.2.is_opened_dinner %} checked{% endif %}
                                            ></th>
                                    </tr>
                                    <tr id="thursday">
                                        <th>Thursday</th>
                                        <th><input class="lunch" type="checkbox" name="thu-lun"
                                            {% if weekdays.3.is_opened_lunch %} checked{% endif %}
                                            ></th>
                                        <th><input class="dinner" type="checkbox" name="thu-din"
                                            {% if weekdays.3.is_opened_dinner %} checked{% endif %}
                                            ></th>
                                    </tr>
                                    <tr id="friday">
                                        <th>Friday</th>
                                        <th><input class="lunch" type="checkbox" name="fri-lun"
                                            {% if weekdays.4.is_opened_lunch %} checked{% endif %}
                                            ></th>
                                        <th><input class="dinner" type="checkbox" name="fri-din"
                                            {% if weekdays.4.is_opened_dinner %} checked{% endif %}
                                            ></th>
                                    </tr>
                                    <tr id="saturday">
                                        <th>Saturday</th>
                                        <th><input class="lunch" type="checkbox" name="sat-lun"
                                            {% if weekdays.5.is_opened_lunch %} checked{% endif %}
                                            ></th>
                                        <th><input class="dinner" type="checkbox" name="sat-din"
                                            {% if weekdays.5.is_opened_dinner %} checked{% endif %}
                                            ></th>
                                    </tr>
                                    <tr id="sunday">
                                        <th>Sunday</th>
                                        <th><input class="lunch" type="checkbox" name="sun-lun"
                                            {% if weekdays.6.is_opened_lunch %} checked{% endif %}
                                            ></th>
                                        <th><input class="dinner" type="checkbox" name="sun-din"
                                            {% if weekdays.6.is_opened_dinner %} checked{% endif %}
                                            ></th>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="submit" class="btn btn-primary">Save changes</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    
                    </div>
                </div>
                </div>
            </div>

        </div>

        <hr>

        <div id="date-list">

        </div>

        <hr>

        <div id="date-add">

        </div>

        <hr>

        <div id="date-booking-conflits">

        </div>
        
    </div>
</section>

<script src="{% static 'booking/date.js' %}"></script>